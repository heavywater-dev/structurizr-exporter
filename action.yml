name: 'Structurizr Exporter'
description: 'Export Structurizr architecture diagrams to SVG format automatically. No setup required - just point to your .dsl files!'
author: 'heavywater-dev'
inputs:
  structurizr-path:
    description: 'Path to Structurizr workspace folder'
    required: false
    default: 'docs/structurizr/'
  output-path:
    description: 'Directory to store exported SVG images'
    required: false
    default: 'docs/images/'
  structurizr-version:
    description: 'Structurizr Lite Docker version'
    required: false
    default: 'latest'
runs:
  using: 'composite'
  steps:
    - name: Install pnpm
      uses: pnpm/action-setup@v4

    - name: Setup Node.js
      uses: actions/setup-node@v4
      with:
        cache: pnpm

    - name: Install dependencies
      run: pnpm install --frozen-lockfile
      shell: bash

    - name: Install Playwright Browsers
      run: pnpm exec playwright install --with-deps
      shell: bash

    - name: Export Structurizr Diagrams
      run: pnpm exec ts-node src/index.ts
      shell: bash
branding:
  icon: 'layers'
  color: 'blue'
